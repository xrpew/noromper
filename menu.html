<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>El Pasaje | Menú</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      name="keywords"
      content="cafetería, café, barista, desayuno, brunch, pastelería, etoastidad en café, café de etoastidad, bebidas de café, música, libros, lectura agradable, ambiente acogedor"
    />
    <meta
      name="description"
      content="Disfruta de una experiencia única en nuestra cafetería. Ofrecemos café de etoastidad, deliciosos desayunos y brunch, así como una variada selección de pastelería fresca. Nuestro ambiente acogedor es perfecto para disfrutar de momentos relajados con amigos. ¡Ven y descubre el placer de un buen café con nossandwiches!"
    />
    <!-- UMAMI -->
    <script defer src="https://umami-prod.notros.io/script.js" data-website-id="2fe20d79-10ae-4acf-91d6-e951a9c4f523"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Varta:wght@300..700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/menu.css" />

    <!-- Favicon -->
    <link href="./img/favcon.ico" rel="icon" />
    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Icon Font Stylesheet -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <!-- <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet"> -->

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet" />
  </head>

  <body>
    <!-- Navbar Start -->
    <nav
      class="navbar navbar-expand-lg bg-dark navbar-dark shadow-sm py-3 py-lg-0 px-3 px-lg-0"
    >
      <a href="index.html" class="navbar-brand d-block d-lg-none">
        <h1 class="m-0 text-uppercase text-white">El Pasaje</h1>
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarCollapse"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto mx-lg-auto py-0">
          <a
            id="principal"
            href="index.html"
            class="nav-item nav-link"
            data-umami-event="ver-home"
            >principal</a
          >
          <a
            id="carta"
            href="menu.html"
            class="nav-item nav-link active"
            data-umami-event="ver-carta"
            >carta</a
          >
          <a
            id="libros"
            href="books.html"
            class="nav-item nav-link"
            data-umami-event="ver-libros"
            >libros</a
          >
          <a
            id="sesiones"
            href="sessions.html"
            class="nav-item nav-link"
            data-umami-event="ver-sesiones"
            >sesiones</a
          >
          <a
            id="escribamos"
            href="contact.html"
            class="nav-item nav-link"
            data-umami-event="ver-escribamos-juntos"
            >escribamos juntos</a
          >
          <!-- <a href="https://open.spotify.com/user/31xirmw7fuh2fma277kkxpa7pkuy?si=V-E2xtS1ReWbsR-PMeFRtA&nd=1&dlsi=14a69e36e7e349ed" target="_blank" class="nav-item nav-link" data-umami-event="ver-playlist">disfruta nuestra playlist</a> -->
        </div>
      </div>
    </nav>
    <!-- Navbar End -->
    <div class="container-fluid about py-5">
      <div class="container">
        <div class="text-center mx-auto pb-3" style="max-width: 600px">
          <h1 id="knowYour" class="display-4 text-uppercase">
            conoce nuestra carta
          </h1>

          <span id="exploreIt"
            >Explora todas las secciones que hemos preparado detalladamente para
            ti</span
          >
        </div>
        <div class="tab-class text-center">
          <ul
            id="tabsMenu"
            class="nav nav-pills d-inline-flex justify-content-center bg-dark text-uppercase border-inner p-4 mb-5"
          >
            <li>Cargando..</li>
          </ul>
          <div class="tab-content" id="tabContentHTML"></div>
        </div>
      </div>
    </div>

    <!-- Footer Start -->
    <div
      class="container-fluid bg-img text-secondary"
      style="margin-top: 135px"
    >
      <div class="container">
        <div class="row gx-5">
          <div class="col-lg-12 col-md-6">
            <div class="row gx-5">
              <div style="display: flex; justify-content: center; padding: 8px">
                <p id="askme">no dudes en consultar</p>
                <!-- <p id="translate">traduccion</p> -->
                <select id="translate">
                  <option value="es" selected>Esp</option>
                  <option value="en">Eng</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>

    <script src="js/main.js"></script>

    <script type="module">
      const hour = 13;
      let currentLang = "en";
      const translate = () => {
        currentLang = currentLang === "es" ? "en" : "es";

        fetch(`./static/menu/${currentLang}.json`)
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("tabContentHTML").innerHTML = "";
            document.getElementById("tabsMenu").innerHTML = "";
            const { fullTitle, allData, nameOfData, mapeo, descriptionData } =
              data;
            // console.log(allData, nameOfData, mapeo);

            // Agregar opción "Ver todo" como la pestaña inicial
            // document.getElementById("tabsMenu").innerHTML += `
              // <li class="nav-item">
                // <a class="nav-link tabsMenucss text-white" data-bs-toggle="pill" href="#tab-all" id="allMenu">${fullTitle}</a>
              // </li>`;

            // Crear el contenido de "Ver todo" con separación por categorías

            let allContent = `<div id="tab-all" class="tab-pane fade show p-0">`;
            allData.forEach((a) => {
              allContent += `
        <h4>${nameOfData[a]}</h4>
        <p>${descriptionData[a] || ""}</p>
        <hr>
        <div class="container" id="all-${a}"></div>`;
            });
            allContent += `</div>`;
            document.getElementById("tabContentHTML").innerHTML += allContent;

            // Crear las demás pestañas y sus contenidos
            allData.map((a, i) => {
              let nameClase = "nav-link tabsMenucss text-white";
              a == "lunch" && hour >= 12
                ? (nameClase = "nav-link tabsMenucss text-white active")
                : "";
              a == "lunch" && hour >= 16
                ? (nameClase = "nav-link tabsMenucss text-white")
                : "";
              a == "breakfast" && hour < 12
                ? (nameClase = "nav-link tabsMenucss text-white active")
                : "";
              document.getElementById("tabsMenu").innerHTML += `
        <li class="nav-item">
          <a class="${nameClase}" data-bs-toggle="pill" href="#tab-${i + 1}">${
                nameOfData[a]
              }</a>
        </li>`;
            });

            allData.map((a, i) => {
              let nameClase = "tab-pane fade show p-0";

              a == "lunch" && hour >= 12
                ? (nameClase = "tab-pane fade show p-0 active")
                : "";
              a == "lunch" && hour >= 16
                ? (nameClase = "tab-pane fade show p-0")
                : "";

              a == "breakfast" && hour < 12
                ? (nameClase = "tab-pane fade show p-0 active")
                : "";
              a == "tapita" && hour >= 16
                ? (nameClase = "tab-pane fade show p-0 active")
                : "";

              document.getElementById("tabContentHTML").innerHTML += `
        <div id="tab-${i + 1}" class="${nameClase}">
          <h4>${nameOfData[a]}</h4>
          <p>${descriptionData[a] || ""}</p>
          <hr>
          <div class="container" id="${a}HTML"></div>
        </div>`;
            });

            // Llenar las pestañas individuales y la de "Ver todo"
            allData.map((a) => {
              const ss = mapeo[a];
              // console.log(a, ss);
              const label = document.getElementById(`${a}HTML`);
              const allLabel = document.getElementById(`all-${a}`); // Contenedor para "Ver todo" por categoría

              ss.map((xx) => {
                const cardHTML = `
          <div class="cards">
            <div class="item">
              <div class="topname">
                <strong onclick="handleEdit(event)" class="title">${
                  xx.name
                }</strong>
                <p class="price">${xx.price}</p>
              </div>
              <p class="description">${xx.description.toLocaleLowerCase()}</p>
            </div>
          </div>`;
                label.innerHTML += cardHTML;
                allLabel.innerHTML += cardHTML; // Agregar los mismos elementos a "Ver todo" bajo su título
              });
            });
          });
      };
      document
        .getElementById("translate")
        .addEventListener("change", translate);
      // document.getElementById('translate').addEventListener('click',translate)

      translate(); // Cargar al inicio
    </script>
  </body>
</html>
